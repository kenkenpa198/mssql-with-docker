<!-- omit in toc -->
# コマンドメモ

Docker や SQL Server の操作でよく使う基本的なコマンドをまとめています。

<!-- omit in toc -->
## 目次

- [1. Linux](#1-linux)
- [2. Docker](#2-docker)
- [3. Docker Compose](#3-docker-compose)
- [4. sqlcmd](#4-sqlcmd)

## 1. Linux

- Docker の起動確認・起動・停止

    ```shell
    $ sudo service docker status                # 確認
    * Docker is not running

    $ sudo service docker start                 # 起動する
    * Starting Docker: docker        [ OK ]

    $ sudo service docker status                # こう表示されれば OK
    * Docker is running

    $ sudo service docker stop                  # 止める場合はコレ
    * Stopping Docker: docker        [ OK ]
    ```

## 2. Docker

- 稼働中のコンテナを表示

    ```shell
    $ sudo docker ps
    ```

- ボリュームを表示・削除

    ```shell
    $ sudo docker volume ls
    $ sudo docker volume rm mssql-with-docker_db-volume
    ```

- 起動中のコンテナ内の sqlcmd を実行

    ```shell
    $ sudo docker exec -it mssql-with-docker_db_1 sqlcmd -S localhost -U SA -P 'パスワード'
    1>
    ```

## 3. Docker Compose

- コンテナをバックグラウンドで起動

    ```shell
    $ sudo docker-compose up -d
    ```

- 起動しているコンテナのログを表示する

    ```shell
    $ sudo docker-compose logs -f
    ```

- 起動しているコンテナに bash で入る

    ```shell
    $ sudo docker-compose exec db bash
    ```

- 起動しているコンテナを停止する

    ```shell
    $ sudo docker-compose stop
    ```

- コンテナを削除する

    ```shell
    $ sudo docker-compose down
    ```

## 4. sqlcmd

- SQL Server へログインする

    ```shell
    $ sqlcmd -S localhost -U SA -P 'パスワード'
    ```

- ログイン + SQL をファイルから読みだして実行する

    ```shell
    $ sqlcmd -S localhost -U SA -P 'パスワード' -i /mount_dir/sql/show_databases.sql
    ```
